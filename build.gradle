
allprojects {
    // task buildJar << { task -> println "$task.project.name" }
    // if (project.name.startsWith("other/")) {
    //     task runBuildJar(dependsOn: buildJar) {}
    // }
}

defaultTasks 'dev'

task gitlog(type: Exec) {
    commandLine '/bin/bash', '-c', 'git log --graph --date=format:"%Y-%m-%d %H:%M:%S" --pretty=format:"%Cred%h%Creset %Cgreen(%ad) -%C(yellow)%d%Creset %s %C(bold blue)<%an>%Creset" --abbrev-commit | aha > dashboard/commits.html'
}

task runQuarkusDev() {
    subprojects.each { dependsOn("${it.name}:quarkusDev") }
}

tasks.register('dev') {
    dependsOn tasks.gitlog
    dependsOn tasks.runQuarkusDev
    doLast {
        println 'Finished.'
    }
}
